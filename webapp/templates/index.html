<!doctype html>
<head>
<meta name="viewport" content="initial-scale=1, maximum-scale=1">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.css" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.js"></script>
</head>

<style>
h3, h4 {text-align: center;}
span {font-weight: bold;}
</style>

<script type=text/javascript>
    $(
    function() 
    {
        $('#flip-1').change(function() 
        {
        $.getJSON('/_switch', {state: $('#flip-1').val()});
        });

        $('#setPosition').click(function() 
        {
        $.getJSON('/_setPosition', {value: $('#targetPositionInput').val()});
        });
    }
    );

    $(
    function stats() 
    {
        $.getJSON('/_stats', function(data)
        {
            $("#motorState").text(data.motorState);
            $("#currentPosition").text(data.currentPosition);
            $("#targetPosition").text(data.targetPosition);
            $("#uptime").text(data.uptime);
            setTimeout(function(){stats();},500);
        });
    }
    );
</script>

<div data-role="page" data-theme="b">
    <div data-role="header">
        <div><h3>PnP Bot Web Control</h3></div>
    </div>

    <div data-role="content">
        <form>
        <p>Motor is <span id="motorState"></span></p>
        <br>
        <select name="flip-1" id="flip-1" data-role="slider" style="float: left;">
            <option value="off">LED off</option>
            <option value="on">LED on</option>
        </select>
        </form>
    </div>

    <div data-role="content">
        <p>Current position <span id="currentPosition"></span></p>
        <p>Target position <span id="targetPosition"></span></p>
        <form>
            <input id="targetPositionInput">
            <button id="setPosition" type="button">Apply</button>
        </select>
        </form>
    </div>
 <div data-role="footer">
        <div><h4>Curent time <span id="uptime"></span></h4></div>
        
    </div>
</div>